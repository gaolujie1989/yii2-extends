<?php

namespace lujie\amazon\advertising\api;

use Yii;
use Iterator;

/**
* This class is autogenerated by the OpenAPI gii generator
* @description **Amazon Attribution**<br/>    Amazon Attribution is an advertising measurement product that enables advertisers to understand the impact that their non-Amazon ads (i.e. Google Ads, Facebook, Microsoft Ads) have in driving shopping activity on Amazon. Measuring ads using Amazon Attribution is done through implementing Attribution tags on non-Amazon ads. Amazon Attribution is currently available in beta for US, CA, UK, DE, FR, IT, and ES vendors and professional sellers enrolled in Brand Registry.<br/><br/>    **Amazon Attribution API**<br/>    The Amazon Attribution API enables agencies and integrators to easily retrieve their advertiser client's non-Amazon publisher attribution tags to automate tag implementation on their non-Amazon ads that link to an Amazon product or Stores page. The API also enables agencies and integrators to create and retrieve reporting on behalf of their advertiser clients to better understand Amazon conversion performance on their campaigns.<br/><br/>    Note that you must pass a header named **Amazon-Advertising-Api-Scope** with each call to an  Amazon Attribution API URI, including GET /advertisers. The value for this header is the **profileId** available from the **Profiles resource (/v2/profiles)**.<br/><br/>    For more information on the functionality, see the [Amazon Attribution API help topic](amazon-attribution/overview). For API onboarding information, see the [account setup](setting-up/account-setup) topic.<br/><br/>**</br></br>[Amazon Advertising API Support JIRA Service Desk - Website](https://amzn-clicks.atlassian.net/servicedesk/customer/user/login?destination=portals)</br>[Amazon Advertising API License Agreement](https://advertising.amazon.com/API/docs/license-agreement)
*/
class AmazonAttributionV3 extends \lujie\amazon\advertising\BaseAmazonAdvertisingClient
{

                
    /**
     * @description Use the response to determine whether to use either the macroTags or nonMacroTemplateTags resource to get tags for a certain publisher.     * @tag Publishers
     * @return array
     *      - *publisher* - array
     *          - A list of publishers.
     */
    public function getPublishers(): array
    {
        return $this->api("/attribution/publishers");
    }
                    
    /**
     * @description 
     * @tag Reports
     * @param array $data 
     *      - *reportType* - string
     *          - The type of report. Either `PERFORMANCE` or `PRODUCTS`. It is an optional parameter. If not used in request body, default reportType is `PERFORMANCE`.
     *      - *advertiserIds* - string
     *          - One or more advertiser Ids to filter reporting by. If requesting reporting for multiple advertiser Ids, input via a comma-delimited list.
     *      - *endDate* - string
     *          - The end date for the report, form as "YYYYMMDD"
     *      - *count* - integer
     *          - The number of entries to include in the report.
     *      - *metrics* - string
     *          - A comma-delimited list of metrics to include in the report. In the report, each metric’s value reflects the events which took place on the row’s date; in other words, events are reported on the date they occurred, not on the date of the attributed click. Attribution is calculated using a 14-day last-click model. For more detail on attribution methodology, see the [Measurement](https://advertising.amazon.com/API/docs/en-us/amazon-attribution/how-to#measurement) section of the API guide. View the list of available metrics for each report type below."Promoted products" refers to products associated with the campaign.
|Metrics for reportType`PERFORMANCE`|
|-------------------|

|Metric  |Description|
|--------|-----------|
|Click-throughs|Ad clicks.|
|attributedDetailPageViewsClicks14d|Ad click-attributed detail page views for promoted product.|
|attributedAddToCartClicks14d|Ad click-attributed add to carts for promoted products.|
|attributedPurchases14d|Ad click-attributed purchases for promoted products.|
|unitsSold14d|Ad click-attributed units sold for promoted products.|
|attributedSales14d|Ad click-attributed sales for promoted products in local currency.|
|attributedTotalDetailPageViewsClicks14d|Ad click-attributed detail page views  for promoted products plus brand halo products.|
|attributedTotalAddToCartClicks14d|Ad click-attributed add to carts for promoted products plus brand halo products.|
|attributedTotalPurchases14d|Ad click-attributed purchases for promoted products plus brand halo products.|
|totalUnitsSold14d|Ad click-attributed units sold for promoted products plus brand halo products.|
|totalAttributedSales14d|Ad click-attributed attributed sales for promoted products plus brand halo products.|
|brb_bonus_amount|Estimated ad-attributed Brand Referral Bonus credit amount in local currency. Will be omitted from response if advertiser is not a BRB-enrolled seller or request does not include a ‘metrics’ list. Requests for this metric must groupBy ADGROUP or CAMPAIGN, or will result in an error 400. Please refer to <https://sellercentral.amazon.com/gp/help/external/L9HPJ34VBFP76HX> to learn more about BRB program.|
|kindleEditionNormalizedPagesRead14d| Number of attributed Kindle edition pages read within 14 days of ad click.|
|kindleEditionNormalizedPagesRoyalties14d|The estimated royalties of attributed estimated Kindle edition normalized pages within 14 days of ad click.|

|Metrics for reportType`PRODUCTS`|
|-------------------|

|Metric  |Description|
|--------|-----------|
|attributedDetailPageViewsClicks14d|Ad click-attributed detail page views for promoted products.|
|attributedAddToCartClicks14d|Ad click-attributed add to carts for promoted products.|
|attributedPurchases14d|Ad click-attributed purchases for promoted products.|
|unitsSold14d|Ad click-attributed units sold for promoted products.|
|attributedSales14d|Ad click-attributed sales for promoted products in local currency.|
|brandHaloDetailPageViewsClicks14d|Ad click-attributed detail page views for brand halo products.|
|brandHaloAttributedAddToCartClicks14d|Ad click-attributed add to carts for brand halo products.|
|brandHaloAttributedPurchases14d|Ad click-attributed purchases for brand halo products.|
|brandHaloUnitsSold14d|Ad click-attributed units sold for brand halo products.|
|brandHaloAttributedSales14d|Ad click-attributed attributed sales for brand halo products.|
|attributedNewToBrandPurchases14d|Ad click-attributed new-to-brand purchases for promoted products. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|attributedNewToBrandUnitsSold14d|Ad click-attributed units sold in new-to-brand purchases for promoted products. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|attributedNewToBrandSales14d|Ad click-attributed sales of new-to-brand purchases for promoted products in local currency. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|brandHaloNewToBrandPurchases14d|Ad click-attributed new-to-brand purchases for brand halo products. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|brandHaloNewToBrandUnitsSold14d|Ad click-attributed units sold in new-to-brand purchases for brand halo products. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|brandHaloNewToBrandSales14d|Ad click-attributed sales of new-to-brand purchases for brand halo products in local currency. A purchase is new-to-brand when a shopper purchases a product from the brand for the first time in the past year.|
|kindleEditionNormalizedPagesRead14d| The no of pages read attributed to ad click-throughs within 14 days.|
|kindleEditionNormalizedPagesRoyalties14d|The estimated royalties of attributed estimated Kindle edition normalized pages within 14 days of ad click.|
     *      - *groupBy* - string
     *          - For Performance report only - controls level of aggregation. Value can be `CAMPAIGN`, `ADGROUP`, or `CREATIVE`. Default is `CREATIVE`.
     *      - *startDate* - string
     *          - The start date for the report, in "YYYYMMDD" format. For reportType `PRODUCTS`, startDate can only be within last 90 days from current date.
     *      - *cursorId* - string
     *          - The value of `cursorId` must be set to `null` without `""`, or set to `""` for the first request. For each following request, the value of `cursorId` from the previous response must be included in the current request. Note that for the cursorId values the `"` character must be escaped with `\`.
     * @return array
     *      - *reports* - array
     *      - *size* - integer
     *          - The size of the report.
     *      - *cursorId* - string
     *          - The identifier of the pagination cursor.
     */
    public function getAttributionTagsByCampaign(array $data, string $contentType = 'application/json'): array
    {
        return $this->api("/attribution/report", 'POST', $data, ['content-type' => $contentType, 'accept' => $contentType]);
    }
                    
    /**
     * @description Some third-party publishers do not support tags that include macro parameters. In this case, the attribution tag includes a set of '**insertValue**' placeholder values. Replace these placeholder values with your campaign, ad group, and ad identifiers to create unique ad-level tags.<br/><br/> For example: "?maas=maas_adg_api_123456789_static_9_99&ref_=aa_maas&tag=maas&aa_campaignid={**insertCampaignId**}&aa_adgroupid={**insertAdGroupId**}&aa_creativeid={**insertAdiD**}"<br/><br/> An example of an integrator nonMacro tag with filled campaign, ad group, and ad ID values is "?maas=maas_adg_api_123456789_static_9_99&ref_=aa_maas&tag=maas&aa_campaignid=**12345**&aa_adgroupid=**5678**&aa_creativeid=**1357**"     * @tag Attribution Tags
     * @param array $query
     *      - *publisherIds* - array - required
     *          - A list of publisher identifiers for which to request tags.
     *      - *advertiserIds* - array - optional
     *          - List of advertiser identifiers for which to request tags.
If no values are passed, all advertisers are returned.
     * @return array
     *      - *advertiserAttributionTagMap* - object
     *          - A list of advertisers and associated attribution tags.
     */
    public function getPublisherMacroAttributionTag(array $query): array
    {
        return $this->api(array_merge(["/attribution/tags/nonMacroTemplateTag"], $query));
    }
                    
    /**
     * @description For sellers, an attribution profile has one associated advertiser. For vendors, an attribution profile may have more than one associated advertiser.     * @tag Advertisers
     * @return array
     *      - *advertisers* - array
     */
    public function getAdvertisersByProfile(): array
    {
        return $this->api("/attribution/advertisers");
    }
                    
    /**
     * @description Third-party publishers, such as Google Ads, Facebook, Microsoft Ads, and Pinterest support tags that include macro parameters. Using macro parameters, campaign tracking information is dynamically inserted into the click-through URL when an ad is clicked. This resource is a tag pre-populated with campaign, ad group, and ad level publisher macros with the values associated with your campaign. <br/><br/> For example, a Google Ads macro tag is "?maas=maas_adg_api_123456789_1_99&ref_=aa_maas&tag=maas&aa_campaignid={campaignid}&aa_adgroupid={adgroupid}&aa_creativeid=ad-{creative}_{targetid}"     * @tag Attribution Tags
     * @param array $query
     *      - *publisherIds* - array - required
     *          - A list of publisher identifiers for which to request tags.
     *      - *advertiserIds* - array - optional
     *          - List of advertiser identifiers for which to request tags.
If no values are passed, all advertisers are returned.
     * @return array
     *      - *advertiserAttributionTagMap* - object
     *          - A list of advertisers and associated attribution tags.
     */
    public function getPublisherAttributionTagTemplate(array $query): array
    {
        return $this->api(array_merge(["/attribution/tags/macroTag"], $query));
    }
    
}
